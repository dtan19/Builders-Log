{"ast":null,"code":"import Order from '../../models/Order';\nimport jwt from 'jsonwebtoken';\nimport connectDb from '../../utils/connectDb';\nconnectDb;\nexport default (async (req, res) => {\n  try {\n    const {\n      iserId\n    } = jwt.verify(req.headers.authorization, process.env.JWT_SECRET);\n    const orders = await Order.find({\n      user: userId\n    }).populate({\n      path: 'products.product',\n      model: \"Product\"\n    });\n    res.status(200).json({\n      orders\n    });\n  } catch (error) {\n    console.error(error);\n    res.status(403).send(\"Please sign in again.\");\n  }\n});","map":{"version":3,"sources":["/Users/david/Dev/myapps/Builders-Log/pages/api/orders.js"],"names":["Order","jwt","connectDb","req","res","iserId","verify","headers","authorization","process","env","JWT_SECRET","orders","find","user","userId","populate","path","model","status","json","error","console","send"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,oBAAlB;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AAEAA,SAAS;AAET,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,MAAI;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAaJ,GAAG,CAACK,MAAJ,CAAWH,GAAG,CAACI,OAAJ,CAAYC,aAAvB,EACnBC,OAAO,CAACC,GAAR,CAAYC,UADO,CAAnB;AAEA,UAAMC,MAAM,GAAG,MAAMZ,KAAK,CAACa,IAAN,CAAW;AAAEC,MAAAA,IAAI,EAAEC;AAAR,KAAX,EAA6BC,QAA7B,CAAsC;AACvDC,MAAAA,IAAI,EAAE,kBADiD;AAEvDC,MAAAA,KAAK,EAAE;AAFgD,KAAtC,CAArB;AAIAd,IAAAA,GAAG,CAACe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAER,MAAAA;AAAF,KAArB;AACH,GARD,CAQE,OAAOS,KAAP,EAAc;AACZC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAjB,IAAAA,GAAG,CAACe,MAAJ,CAAW,GAAX,EAAgBI,IAAhB,CAAqB,uBAArB;AACH;AACJ,CAbD","sourcesContent":["import Order from '../../models/Order';\nimport jwt from 'jsonwebtoken';\nimport connectDb from '../../utils/connectDb';\n\nconnectDb;\n\nexport default async (req, res) => {\n    try {\n        const { iserId } = jwt.verify(req.headers.authorization,\n        process.env.JWT_SECRET)\n        const orders = await Order.find({ user: userId }).populate({\n            path: 'products.product',\n            model: \"Product\"\n        })\n        res.status(200).json({ orders })\n    } catch (error) {\n        console.error(error)\n        res.status(403).send(\"Please sign in again.\")\n    }\n}"]},"metadata":{},"sourceType":"module"}