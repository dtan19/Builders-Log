{"ast":null,"code":"// import products from '../../static/products.json'\nimport Product from '../../models/Product';\nimport connectDb from '../../utils/connectDb';\nconnectDb();\nexport default (async (req, res) => {\n  const {\n    page,\n    size\n  } = req.query; // Convert the querystring values to numbers\n\n  const pageNum = Number(page);\n  const pageSize = Number(size);\n  let products = [];\n\n  if (pageNum === 1) {\n    products = await Product.find().limit(pageSize);\n  } else {\n    const skips = pageSize * (pageNum - 1);\n    products = await Product.find().skip(skips).limit(pageSize);\n  } //const products = await Product.find();\n\n\n  res.status(200).json(products);\n});","map":{"version":3,"sources":["/Users/david/Dev/myapps/Builders-Log/pages/api/products.js"],"names":["Product","connectDb","req","res","page","size","query","pageNum","Number","pageSize","products","find","limit","skips","skip","status","json"],"mappings":"AAAA;AACA,OAAOA,OAAP,MAAoB,sBAApB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AAEAA,SAAS;AAET,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAiBH,GAAG,CAACI,KAA3B,CAD+B,CAE/B;;AACA,QAAMC,OAAO,GAAGC,MAAM,CAACJ,IAAD,CAAtB;AACA,QAAMK,QAAQ,GAAGD,MAAM,CAACH,IAAD,CAAvB;AACA,MAAIK,QAAQ,GAAG,EAAf;;AACA,MAAIH,OAAO,KAAK,CAAhB,EAAmB;AACfG,IAAAA,QAAQ,GAAG,MAAMV,OAAO,CAACW,IAAR,GAAeC,KAAf,CAAqBH,QAArB,CAAjB;AACH,GAFD,MAEO;AACH,UAAMI,KAAK,GAAGJ,QAAQ,IAAIF,OAAO,GAAG,CAAd,CAAtB;AACAG,IAAAA,QAAQ,GAAG,MAAMV,OAAO,CAACW,IAAR,GAAeG,IAAf,CAAoBD,KAApB,EAA2BD,KAA3B,CAAiCH,QAAjC,CAAjB;AACH,GAX8B,CAY/B;;;AACAN,EAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBN,QAArB;AACH,CAdD","sourcesContent":["// import products from '../../static/products.json'\nimport Product from '../../models/Product';\nimport connectDb from '../../utils/connectDb';\n\nconnectDb();\n\nexport default async (req, res) => {\n    const { page, size } = req.query\n    // Convert the querystring values to numbers\n    const pageNum = Number(page);\n    const pageSize = Number(size);\n    let products = [];\n    if (pageNum === 1) {\n        products = await Product.find().limit(pageSize)\n    } else {\n        const skips = pageSize * (pageNum - 1)\n        products = await Product.find().skip(skips).limit(pageSize)\n    }\n    //const products = await Product.find();\n    res.status(200).json(products)\n};"]},"metadata":{},"sourceType":"module"}