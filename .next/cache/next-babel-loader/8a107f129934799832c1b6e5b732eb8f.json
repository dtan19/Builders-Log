{"ast":null,"code":"// import products from '../../static/products.json'\nimport Product from '../../models/Product';\nimport connectDb from '../../utils/connectDb';\nconnectDb();\nexport default (async (req, res) => {\n  const {\n    page,\n    size\n  } = req.query; // Convert the querystring values to numbers\n\n  const pageNum = Number(page);\n  const pageSize = Number(size);\n  let products = [];\n  const totalDocs = await Product.countDocuments();\n  const totalPages = Math.ceil(totalDocs / pageSize);\n\n  if (pageNum === 1) {\n    products = await Product.find().limit(pageSize);\n  } else {\n    const skips = pageSize * (pageNum - 1);\n    products = await Product.find().skip(skips).limit(pageSize);\n  } //const products = await Product.find();\n\n\n  res.status(200).json({\n    products,\n    totalPages\n  });\n});","map":null,"metadata":{},"sourceType":"module"}