{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/david/Dev/myapps/Builders-Log/components/Product/AddProductToCart.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { Input } from 'semantic-ui-react';\nimport { useRouter } from 'next/router';\nimport axios from 'axios';\nimport baseUrl from '../../utils/baseUrl';\nimport cookie from 'js-cookie';\nimport catchErrors from '../../utils/catchErrors';\n\nfunction AddProductToCart(_ref) {\n  var user = _ref.user,\n      productId = _ref.productId;\n\n  var _React$useState = React.useState(1),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      quantity = _React$useState2[0],\n      setQuantity = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      loading = _React$useState4[0],\n      setLoading = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      success = _React$useState6[0],\n      setSuccess = _React$useState6[1];\n\n  var router = useRouter();\n\n  function handleAddProductToCart() {\n    var url, payload, token, headers;\n    return _regeneratorRuntime.async(function handleAddProductToCart$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            setLoading(true);\n            console.log(user);\n            url = \"\".concat(baseUrl, \"/api/cart\");\n            payload = {\n              quantity: quantity,\n              productId: productId\n            };\n            token = cookie.get('token');\n            headers = {\n              headers: {\n                Authorization: token\n              }\n            };\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(axios.put(url, payload, headers));\n\n          case 9:\n            setSuccess(true);\n            _context.next = 15;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](0);\n            catchErrors(_context.t0, window.alert);\n\n          case 15:\n            _context.prev = 15;\n            setLoading(false);\n            return _context.finish(15);\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 12, 15, 18]]);\n  }\n\n  return __jsx(Input, {\n    type: \"number\",\n    min: \"1\",\n    placeholder: \"Quantity\",\n    value: quantity,\n    onChange: function onChange(event) {\n      return setQuantity(Number(event.target.value));\n    },\n    action: user && success ? {\n      color: 'blue',\n      content: \"Item Added!\",\n      icon: \"plus cart\",\n      disabled: false\n    } : user ? {\n      color: \"green\",\n      content: \"Add to Cart\",\n      icon: \"plus cart\",\n      loading: loading,\n      diabled: loading,\n      onClick: handleAddProductToCart\n    } : {\n      color: 'blue',\n      content: \"Sign Up To purchase\",\n      icon: \"signup\",\n      onClick: function onClick() {\n        return router.push('/signup');\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  });\n}\n\nexport default AddProductToCart;","map":{"version":3,"sources":["/Users/david/Dev/myapps/Builders-Log/components/Product/AddProductToCart.js"],"names":["React","Input","useRouter","axios","baseUrl","cookie","catchErrors","AddProductToCart","user","productId","useState","quantity","setQuantity","loading","setLoading","success","setSuccess","router","handleAddProductToCart","console","log","url","payload","token","get","headers","Authorization","put","window","alert","event","Number","target","value","color","content","icon","disabled","diabled","onClick","push"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Input } from 'semantic-ui-react';\nimport { useRouter } from 'next/router';\nimport axios from 'axios';\nimport baseUrl from '../../utils/baseUrl';\nimport cookie from 'js-cookie';\nimport catchErrors from '../../utils/catchErrors';\n\n\nfunction AddProductToCart({ user, productId }) {\n  const [quantity, setQuantity] = React.useState(1);\n  const [loading, setLoading] = React.useState(false);\n  const [success, setSuccess] = React.useState(false);\n  const router = useRouter();\n\n  async function handleAddProductToCart() {\n    try {\n      setLoading(true)\n      console.log(user)\n      const url = `${baseUrl}/api/cart`\n      const payload = { quantity, productId }\n      const token = cookie.get('token')\n      const headers = { headers: { Authorization: token }}\n      await axios.put( url, payload, headers );\n      setSuccess(true);\n  } catch (error) {\n    catchErrors(error, window.alert)\n  } finally {\n    setLoading(false)\n  }\n}\n\nreturn (\n  <Input\n    type=\"number\"\n    min=\"1\"\n    placeholder=\"Quantity\"\n    value={quantity}\n    onChange={event => setQuantity(Number(event.target.value))}\n    action={\n    user && success ? {\n      color: 'blue',\n      content: \"Item Added!\",\n      icon: \"plus cart\",\n      disabled: false\n  } : \n    user ? {\n    color: \"green\",\n    content: \"Add to Cart\",\n    icon: \"plus cart\",\n    loading,\n    diabled: loading,\n    onClick: handleAddProductToCart,\n  } : {\n    color: 'blue',\n    content: \"Sign Up To purchase\",\n    icon: \"signup\",\n    onClick: () => router.push('/signup')\n  }}\n/>)\n}\n\nexport default AddProductToCart;"]},"metadata":{},"sourceType":"module"}